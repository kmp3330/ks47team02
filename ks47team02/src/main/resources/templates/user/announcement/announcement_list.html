<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{user/layout/default}">

<th:block layout:fragment="customJs">
	<!-- 자바스크립트 작성 공간 -->
	<script>
	// 구인구직 공고 삭제
	$('.danger-border').click(function (e) {
            e.preventDefault();

            let isDelete = confirm('정말로 삭제하시겠습니까?');

            if(isDelete) {
                const announcementCode = this.dataset.announcementCode;
                location.replace(`/announcement/announcementRemove?announcementCode=${announcementCode}`);
            }
        });
	</script>
</th:block>

<th:block layout:fragment="customContents">
	
	<section class="jobs-area section-padding">
		<div class="container col-lg-12">
			<div class="row">
				<div class="col-lg-2">
					<div class="sidebar">
						<div class="single-item mb-4">
							<h4 class="mb-4">구인구직</h4>
							<a th:href="@{/announcement/announcementList}"
								class="sidebar-btn d-flex justify-content-between mb-3"> <span>구인구직 검색</span></a> 
						</div>
					</div>
				</div>
				<div class="col-lg-10">
					<div class="single-job mb-4 justify-content-between">
						<div class="card">
							<div class="card-header border-0">
								<form th:action="@{/announcement/announcementList}" method="get">
		                            <select name="searchKey">
		                                <option value="joinCateName">참여분야별 검색</option>
		                                <option value="areaCate">지역별 검색</option>
		                            </select>
		                            <input type="text" name="searchValue" placeholder="검색어 입력" onfocus="this.placeholder = ''" onblur="this.placeholder = '검색어 입력'" required="">
		                            <button type="submit" class="template-btn">검색</button>
		                        </form><br>
								<div class="card-tools">
									<a th:href="@{/announcement/announcementInsert}" class="genric-btn info-border circle">
									<i class="fas">등록</i>
									</a>
								</div>
							</div>
							<div class="card-body table-responsive p-0">
								<table class="table table-striped table-valign-middle">
									<thead>
										<tr>
											<th>회사명</th>
											<th>참여분야</th>
											<th>지역분류</th>
											<th>채용직</th>
											<th>요구기술</th>
											<th>관련업무경력</th>
											<th>채용인원</th>
											<th>급여</th>
											<th>마감시간</th>
											<th>수정</th>
											<th>삭제</th>
										</tr>
									</thead>
									<tbody>
										<tr th:unless="${#lists.isEmpty(announcementList)}"
											th:each="l : ${announcementList}">
											<td th:text="${l.cpName}"></td>
											<td th:text="${l.joinCateName}"></td>
											<td th:text="${l.areaCate}"></td>
											<td th:text="${l.jobOpening}"></td>
											<td th:text="${l.requiredSkills}"></td>
											<td th:text="${l.career}"></td>
											<td th:text="${l.recruitment}"></td>
											<td th:text="${l.wage}"></td>
											<td th:text="${l.dueDate}"></td>
											<td><a th:href="@{/announcement/announcementModify(announcementCode=${l.announcementCode})}"
												class="genric-btn success-border circle"> <i class="fas">수정</i>
											</a></td>
											<td><a th:href="@{#}" th:data-announcement-code="${l.announcementCode}"
												class="genric-btn danger-border circle"> <i class="fas">삭제</i>
											</a></td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>
</th:block>

</html>